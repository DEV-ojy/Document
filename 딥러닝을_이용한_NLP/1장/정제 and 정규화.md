# 정제(Cleaning) and 정규화(Normalization)

코퍼스에서 `용도에 맞게 토큰을 분류하는 작업을 토큰화` 라고 하며 토큰화 작업 전,후에는 텍스트 데이터를 용도에 맞게 `정제 및 정규화`하는 일이 항상 함께합니다 정제 및 정구화의 목적은 각각 다음과 같습니다 

* 정제(cleaning): 갖고 있는 코퍼스로부터 노이즈 데이터를 제거한다
* 정규화(normalization) : 표현 방법이 다른 단어들을 통합시켜서 같은 단어로 만들어준다

**정제** 작업은 토큰화 작업에 방해가 되는 부분들을 배제시키고 토큰화 작업을 수행하기 위해서 토큰화 작업보다 앞서 이루어지기도 하지만, 토큰화 작업 이후에도 여전히 남아있는 노이즈들을 제거하기위해 지속적으로 이루어지기도 합니다

사실 완벽한 정제 작업은 어려운 편이라서, 대부분의 경우 이 정도면 됐다 라는 일종의 합의점을 찾기도 합니다

## 1. 규칙에 기반한 표기가 다른 단어들의 통합

필요에 따라 직접 코딩을 통해 정의할 수 있는 정규화 규칙의 예로서 같은 의미를 갖고있음에도, 표기가 다른 단어들을 하나의 단어로 정규화하는 방법을 사용할 수 있습니다 

가령 USA와 US는 같은 의미를 가지므로 하나의 단어로 정규화해볼 수 있습니다 

이러한 정규화를 거치게 되면, US를 찾아도 USA도 함께 찾을 수 있을 것입니다 뒤에서 표기가 다른 단어들을 통합하는 방법인 `어간 추출(stemming)`과 `표제어 추출(lemmatizaiton)`에 대해서 더 자세히 알아봅니다

## 2. 대, 소문자 통합

`영어권 언어` 에서 대, 소문자를 통합하는 것은 단어의 개수를 줄일 수 있는 또 다른 정규화 방법입니다

영어권 언어에서 대문자는 문장의 맨 앞 등과 같은 특정 상황에서만 쓰이고, 대부분의 글은 소문자로 작성되기 때문에 대, 소문자 통합 작업은 대부분 대문자를 소문자로 변환하는 소문자 변환작업으로 이루어지게 됩니다

소문자 변환이 왜 유용한지 예를 들어보도록 하겠습니다 가령, Automobile이라는 단어가 문장의 첫 단어였기때문에 A가 대문자였다고 생각해봅시다

여기에 소문자 변환을 사용하면, automobile을 찾는 질의(query)의 결과로서 Automobile도 찾을 수 있게 됩니다 

검색 엔진에서 사용자가 페라리 차량에 관심이 있어서 페라리를 검색해본다고 합시다

엄밀히 말해서 사실 사용자가 검색을 통해 찾고자하는 결과는 a Ferrari car라고 봐야합니다 하지만 검색 엔진은 소문자 변환을 적용했을 것이기 때문에 ferrari만 쳐도 원하는 결과를 얻을 수 있을 것입니다

**물론 대문자와 소문자를 무작정 통합해서는 안 됩니다**

    대문자와 소문자가 구분되어야 하는 경우도 있습니다 가령 미국을 뜻하는 단어 US와 우리를 뜻하는 us는 구분되어야 합니다 또 회사 이름(General Motors)나, 사람 이름(Bush) 등은 대문자로 유지되는 것이 옳습니다

모든 토큰을 소문자로 만드는 것이 문제를 가져온다면, 또 다른 대안은 일부만 소문자로 변환시키는 방법도 있습니다

가령, 이런 규칙은 어떨까요? 문장의 맨 앞에서 나오는 단어의 대문자만 소문자로 바꾸고, 다른 단어들은 전부 대문자인 상태로 놔두는 것입니다

이러한 작업은 더 많은 변수를 사용해서 소문자 변환을 언제 사용할지 결정하는 머신 러닝 시퀀스 모델로 더 정확하게 진행시킬 수 있습니다

하지만 만약 올바른 대문자 단어를 얻고 싶은 상황에서 훈련에 사용하는 코퍼스가 사용자들이 단어의 대문자, 소문자의 올바른 사용 방법과 상관없이 소문자를 사용하는 사람들로부터 나온 데이터라면 이러한 방법 또한 그다지 도움이 되지 않을 수 있습니다

결국에는 예외 사항을 크게 고려하지 않고, 모든 코퍼스를 소문자로 바꾸는 것이 종종 더 실용적인 해결책이 되기도 합니다