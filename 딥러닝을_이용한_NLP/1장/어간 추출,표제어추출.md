# 어간 추출(Stemming) & 표제어 추출(Lemmatization)

정규화 기법중, 코퍼스에 있는 단어의 개수를 줄일 수 있는 기법인 표제어 추출(lemmatization)과 어간 추출(stemming)의 개념에 대해서 알아보겠습니다 

이 두 작업이 갖고있는 의미는 눈으로 봤을때는 서로 다른 단어들이지만 하나의 단어로 일반화시킬 수 있다면, 하나의 단어로 일반화시켜서 `문서 내의 단어 수를 줄이겠다`는 것입니다 

이러한 방법들은 단어의 빈도수를 기반으로 문제를 풀고자하는 BoW표현을 사용하는 자연어처리문제에서 주로 사용됩니다 

자연어 처리에서 전처리,더 정확히는 정규화의 지향점은 **언제나 갖고 있는 코퍼스로부터 복잡성을 줄이는 일**입니다

## 1.표제어 추출(Lemmatization)

표제어(Lemma)는 한글로는 `표제어` 또는 `기본 사전형 단어` 정도의 의미를 갖습니다

표제어 추출은 단어들로부터 표제어를 찾아가는 과정입니다
표제어 추출은 단어들이 다른 형태를 가지더라도, 그 뿌리 단어를 찾아가서 단어의 개수를 줄일 수 있는지 판단합니다 

```
예를 들어서 am, are, is는 서로 다른 스펠링이지만 그 뿌리 단어는 be라고 볼 수 있습니다. 이때, 이 단어들의 표제어는 be라고 합니다
```

표제어 추출을 하는 가장 섬세한 방법은 *단어의 형태학적 파싱을 먼저 진행*하는 것입니다
형태소란 `의미를 가진 가장 작은 단위`를 뜻합니다 그리고 형태학(morphology)이란 형태소로부터 단어들을 만들어가는 학문을 뜻합니다 형태소의 종류로 `어간(stem)`과 `접사(affix)`가 존재합니다

##### 1) 어간(stem)
:단어의 의미를 담고 있는 단어의 핵심 부분
##### 2) 접사(affix)
:단어에 추가적인 의미를 주는 부분 

형태학적 파싱은 이 두가지 구성 요소를 분리하는 작업을 말합니다 가령 cats라는 단어에 대해 형태학적 파싱을 수행한다면, 형태학적 파싱은 결과로 cat(어간)dhk -s(접사)를 분리합니다 
꼭 두가지로 분리되지 않는 경우도 있습니다 단어 fox는 형태학적 파싱을 한다고 하더라도 더 이상 분리할 수 없습니다 fox는 독립적인 형태소이기 때문입니다 

NLTK에서는 표제어 추출을 위한 도구인 WordNetLemmatizer를 지원합니다 이를 통해 표제어 추출을 실습해보겠습니다

```py
from nltk.stem import WordNetLemmatizer

lemmatizer = WordNetLemmatizer()

words = ['policy', 'doing', 'organization', 'have', 'going', 'love', 'lives', 'fly', 'dies', 'watched', 'has', 'starting']

print('표제어 추출 전 :',words)
print('표제어 추출 후 :',[lemmatizer.lemmatize(word) for word in words])
```
```
표제어 추출 전 : ['policy', 'doing', 'organization', 'have', 'going', 'love', 'lives', 'fly', 'dies', 'watched', 'has', 'starting']
표제어 추출 후 : ['policy', 'doing', 'organization', 'have', 'going', 'love', 'life', 'fly', 'dy', 'watched', 'ha', 'starting']
```

표제어 추출은 뒤에서 언급할 어간 추출과는 달리 단어의 형태가 적절히 보존되는 양상을 보이는 특징이 있습니다 하지만 그럼에도 위의 결과에서는 dy나 ha와 같이 의미를 알 수 없는 적절하지 못한 단어를 출력하고 있습니다 

이는 표제어 추출기(lemmatizer)가 본래 단어의 품사 정보를 알아야만 정확한 결과를 얻을 수 있기 때문입니다

WordNetLemmatizer는 입력으로 단어가 동사 품사라는 사실을 알려줄 수 있습니다 즉, dies와 watched, has가 문장에서 동사로 쓰였다는 것을 알려준다면 표제어 추출기는 품사의 정보를 보존하면서 정확한 Lemma를 출력하게 됩니다
```py
lemmatizer.lemmatize('dies', 'v')
lemmatizer.lemmatize('watched', 'v')
lemmatizer.lemmatize('has', 'v')
```
```
'die'
'watch'
'have'
```
표제어 추출은 문맥을 고려하며 수행했을 때의 결과는 해당 단어의 품사 정보를 보존합니다
하지만 어간 추출을 수행한 결과는 품사 정보가 보존되지 않습니다 더 정확히는 어간 추출을 한 결과는 사전에 존재하지 않는 단어일 경우가 많습니다
